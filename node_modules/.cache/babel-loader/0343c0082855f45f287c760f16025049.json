{"ast":null,"code":"import _slicedToArray from\"D:/F8/tiktok_clone/tiktok-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useMemo,useEffect}from\"react\";import\"./Video.css\";import{AiFillHeart}from\"react-icons/ai\";import{FaCommentDots,FaShare,FaMusic,FaWhatsapp}from\"react-icons/fa\";import{ImEmbed2}from\"react-icons/im\";import{FiSend}from\"react-icons/fi\";import LazyLoad from\"react-lazyload\";import{BsFacebook}from\"react-icons/bs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useElementOnScreen=function useElementOnScreen(options,targetRef){var _useState=useState(),_useState2=_slicedToArray(_useState,2),isVisibile=_useState2[0],setIsVisible=_useState2[1];var callbackFunction=function callbackFunction(entries){var _entries=_slicedToArray(entries,1),entry=_entries[0];//const entry = entries[0]\nsetIsVisible(entry.isIntersecting);};var optionsMemo=useMemo(function(){return options;},[options]);useEffect(function(){var observer=new IntersectionObserver(callbackFunction,optionsMemo);var currentTarget=targetRef.current;if(currentTarget)observer.observe(currentTarget);return function(){if(currentTarget)observer.unobserve(currentTarget);};},[targetRef,optionsMemo]);return isVisibile;};var VideoInfo=function VideoInfo(_ref){var urlAvatar=_ref.urlAvatar,userName=_ref.userName,userId=_ref.userId,musicName=_ref.musicName,tagId=_ref.tagId;// Toast function\nvar toast=function toast(_ref2){var _ref2$title=_ref2.title,title=_ref2$title===void 0?\"\":_ref2$title,_ref2$message=_ref2.message,message=_ref2$message===void 0?\"\":_ref2$message,_ref2$type=_ref2.type,type=_ref2$type===void 0?\"info\":_ref2$type,_ref2$duration=_ref2.duration,duration=_ref2$duration===void 0?3000:_ref2$duration;var main=document.getElementById(\"toast\");if(main){var _toast=document.createElement(\"div\");// Auto remove toast\nvar autoRemoveId=setTimeout(function(){main.removeChild(_toast);},duration+1000);// Remove toast when clicked\n_toast.onclick=function(e){if(e.target.closest(\".toast__close\")){main.removeChild(_toast);clearTimeout(autoRemoveId);}};var icons={success:\"fas fa-check-circle\",info:\"fas fa-info-circle\",warning:\"fas fa-exclamation-circle\",error:\"fas fa-exclamation-circle\"};var icon=icons[type];var delay=(duration/1000).toFixed(2);_toast.classList.add(\"toast\",\"toast--\".concat(type));_toast.style.animation=\"slideInLeft ease .3s, fadeOut linear 1s \".concat(delay,\"s forwards\");_toast.innerHTML=\"\\n                      <div class=\\\"toast__icon\\\">\\n                          <i class=\\\"\".concat(icon,\"\\\"></i>\\n                      </div>\\n                      <div class=\\\"toast__body\\\">\\n                          <h3 class=\\\"toast__title\\\">\").concat(title,\"</h3>\\n                          <p class=\\\"toast__msg\\\">\").concat(message,\"</p>\\n                      </div>\\n                      <div class=\\\"toast__close\\\">\\n                          <i class=\\\"fas fa-times\\\"></i>\\n                      </div>\\n                  \");main.appendChild(_toast);}};var showSuccessToast=function showSuccessToast(){toast({title:\"Thành công!\",message:\"Bạn đã theo dõi user này\",type:\"success\",duration:5000});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"toast\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"video_info_wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:urlAvatar,className:\"avatar-info\",alt:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"video_info_user\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_info_wrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user_id\",children:userId}),/*#__PURE__*/_jsx(\"span\",{className:\"user_name\",children:userName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video_info_tag\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"tag_id\",children:[tagId,\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tag_music\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(FaMusic,{})}),\" \",musicName,\" \"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-follow\",onClick:showSuccessToast,children:\"Follow\"})]})]});};var VideoContent=function VideoContent(_ref3){var url=_ref3.url,urlAvatar=_ref3.urlAvatar;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPlaying=_useState4[0],setPlaying=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubscribe=_useState6[0],setSubscribed=_useState6[1];var videoRef=useRef();var options={root:null,rootMargin:\"0px\",threshold:0.7};var isVisibile=useElementOnScreen(options,videoRef);useEffect(function(){if(isVisibile){var playPromise=videoRef.current.play();if(playPromise!==undefined){playPromise.then(function(_){if(!isPlaying){videoRef.current.play();setPlaying(true);}}).catch(function(error){// Auto-play was prevented\n// Show paused UI.\n});}}else{if(isPlaying){videoRef.current.pause();setPlaying(false);}}},[isVisibile]);var handleShareIcon=function handleShareIcon(){// alert(\"Subscribed\")\nif(isSubscribe===false){setSubscribed(true);setTimeout(function(){setSubscribed(false);},3000);}else{setSubscribed(false);}};var playVideo=function playVideo(){if(isPlaying==false){videoRef.current.play();setPlaying(true);}else{videoRef.current.pause();setPlaying(false);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"video_content-wrapper\",children:[/*#__PURE__*/_jsx(\"video\",{controls:true,autoPlay:\"autoplay\",\"webkit-playsinline\":\"true\",playsInline:true,ref:videoRef,onClick:playVideo,loop:true,alt:\"Video\",className:\"video_content-clip\",src:url,type:\"video/mp4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"video_content-emoji\",children:[/*#__PURE__*/_jsx(\"img\",{src:urlAvatar,className:\"avatar-info\",alt:\"Avatar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"video_content-icon\",children:/*#__PURE__*/_jsx(AiFillHeart,{className:\"icon-heart\",onClick:handleShareIcon,style:isSubscribe?{color:\"red\"}:{}})}),/*#__PURE__*/_jsx(\"span\",{children:\"13.9k\"}),/*#__PURE__*/_jsx(\"span\",{className:\"video_content-icon\",children:/*#__PURE__*/_jsx(FaCommentDots,{})}),/*#__PURE__*/_jsx(\"span\",{children:\"512\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"video_content-icon\",children:[/*#__PURE__*/_jsx(FaShare,{className:\"share-icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"video_share-wrapper\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"video_share-list\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"video_share-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"video_share-item-icon\",children:/*#__PURE__*/_jsx(ImEmbed2,{})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"video_share-item-link\",children:\"Nh\\xFAng\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"video_share-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"video_share-item-icon\",children:/*#__PURE__*/_jsx(BsFacebook,{})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"video_share-item-link\",children:\"Chia s\\u1EBB facebook\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"video_share-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"video_share-item-icon\",children:/*#__PURE__*/_jsx(FaWhatsapp,{})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"video_share-item-link\",children:\"Chia s\\u1EBB Whatsapp\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"video_share-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"video_share-item-icon\",children:/*#__PURE__*/_jsx(FiSend,{})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"video_share-item-link\",children:\"G\\u1EEDi cho b\\u1EA1n b\\xE8\"})]})]})})]}),/*#__PURE__*/_jsx(\"span\",{children:\"103\"})]})]})});};export default function Video(_ref4){var urlVideo=_ref4.urlVideo,urlAvatar=_ref4.urlAvatar,userName=_ref4.userName,userId=_ref4.userId,musicName=_ref4.musicName,tagId=_ref4.tagId;return/*#__PURE__*/_jsxs(\"div\",{className:\"video-wrapper\",children:[/*#__PURE__*/_jsx(VideoInfo,{urlAvatar:urlAvatar,userName:userName,userId:userId,musicName:musicName,tagId:tagId}),/*#__PURE__*/_jsx(VideoContent,{url:urlVideo,urlAvatar:urlAvatar})]});}","map":{"version":3,"sources":["D:/F8/tiktok_clone/tiktok-clone/src/components/Video/Video.js"],"names":["React","useRef","useState","useMemo","useEffect","AiFillHeart","FaCommentDots","FaShare","FaMusic","FaWhatsapp","ImEmbed2","FiSend","LazyLoad","BsFacebook","useElementOnScreen","options","targetRef","isVisibile","setIsVisible","callbackFunction","entries","entry","isIntersecting","optionsMemo","observer","IntersectionObserver","currentTarget","current","observe","unobserve","VideoInfo","urlAvatar","userName","userId","musicName","tagId","toast","title","message","type","duration","main","document","getElementById","createElement","autoRemoveId","setTimeout","removeChild","onclick","e","target","closest","clearTimeout","icons","success","info","warning","error","icon","delay","toFixed","classList","add","style","animation","innerHTML","appendChild","showSuccessToast","VideoContent","url","isPlaying","setPlaying","isSubscribe","setSubscribed","videoRef","root","rootMargin","threshold","playPromise","play","undefined","then","_","catch","pause","handleShareIcon","playVideo","color","Video","urlVideo"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useMemo, useEffect } from \"react\";\r\nimport \"./Video.css\";\r\nimport { AiFillHeart } from \"react-icons/ai\";\r\nimport { FaCommentDots, FaShare, FaMusic, FaWhatsapp } from \"react-icons/fa\";\r\nimport { ImEmbed2 } from \"react-icons/im\";\r\nimport { FiSend } from \"react-icons/fi\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { BsFacebook } from \"react-icons/bs\";\r\n\r\nconst useElementOnScreen = (options, targetRef) => {\r\n  const [isVisibile, setIsVisible] = useState();\r\n  const callbackFunction = (entries) => {\r\n    const [entry] = entries; //const entry = entries[0]\r\n    setIsVisible(entry.isIntersecting);\r\n  };\r\n  const optionsMemo = useMemo(() => {\r\n    return options;\r\n  }, [options]);\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(callbackFunction, optionsMemo);\r\n    const currentTarget = targetRef.current;\r\n    if (currentTarget) observer.observe(currentTarget);\r\n\r\n    return () => {\r\n      if (currentTarget) observer.unobserve(currentTarget);\r\n    };\r\n  }, [targetRef, optionsMemo]);\r\n  return isVisibile;\r\n};\r\n\r\nconst VideoInfo = ({ urlAvatar, userName, userId, musicName, tagId }) => {\r\n  // Toast function\r\n  const toast = ({\r\n    title = \"\",\r\n    message = \"\",\r\n    type = \"info\",\r\n    duration = 3000,\r\n  }) => {\r\n    const main = document.getElementById(\"toast\");\r\n    if (main) {\r\n      const toast = document.createElement(\"div\");\r\n\r\n      // Auto remove toast\r\n      const autoRemoveId = setTimeout(function () {\r\n        main.removeChild(toast);\r\n      }, duration + 1000);\r\n\r\n      // Remove toast when clicked\r\n      toast.onclick = function (e) {\r\n        if (e.target.closest(\".toast__close\")) {\r\n          main.removeChild(toast);\r\n          clearTimeout(autoRemoveId);\r\n        }\r\n      };\r\n\r\n      const icons = {\r\n        success: \"fas fa-check-circle\",\r\n        info: \"fas fa-info-circle\",\r\n        warning: \"fas fa-exclamation-circle\",\r\n        error: \"fas fa-exclamation-circle\",\r\n      };\r\n      const icon = icons[type];\r\n      const delay = (duration / 1000).toFixed(2);\r\n\r\n      toast.classList.add(\"toast\", `toast--${type}`);\r\n      toast.style.animation = `slideInLeft ease .3s, fadeOut linear 1s ${delay}s forwards`;\r\n\r\n      toast.innerHTML = `\r\n                      <div class=\"toast__icon\">\r\n                          <i class=\"${icon}\"></i>\r\n                      </div>\r\n                      <div class=\"toast__body\">\r\n                          <h3 class=\"toast__title\">${title}</h3>\r\n                          <p class=\"toast__msg\">${message}</p>\r\n                      </div>\r\n                      <div class=\"toast__close\">\r\n                          <i class=\"fas fa-times\"></i>\r\n                      </div>\r\n                  `;\r\n      main.appendChild(toast);\r\n    }\r\n  };\r\n\r\n  const showSuccessToast = () => {\r\n    toast({\r\n      title: \"Thành công!\",\r\n      message: \"Bạn đã theo dõi user này\",\r\n      type: \"success\",\r\n      duration: 5000,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div id=\"toast\"></div>\r\n      <div className=\"video_info_wrapper\">\r\n        <img src={urlAvatar} className=\"avatar-info\" alt=\"Avatar\" />\r\n        <div className=\"video_info_user\">\r\n          <div className=\"user_info_wrapper\">\r\n            <span className=\"user_id\">{userId}</span>\r\n            <span className=\"user_name\">{userName}</span>\r\n          </div>\r\n          <div className=\"video_info_tag\">\r\n            <span className=\"tag_id\">{tagId} </span>\r\n          </div>\r\n          <div className=\"tag_music\">\r\n            {\" \"}\r\n            <span>\r\n              <FaMusic />\r\n            </span>{\" \"}\r\n            {musicName}{\" \"}\r\n          </div>\r\n        </div>\r\n        <button className=\"btn btn-follow\" onClick={showSuccessToast}>\r\n          Follow\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst VideoContent = ({ url, urlAvatar }) => {\r\n  const [isPlaying, setPlaying] = useState(false);\r\n  const [isSubscribe, setSubscribed] = useState(false);\r\n  const videoRef = useRef();\r\n  const options = {\r\n    root: null,\r\n    rootMargin: \"0px\",\r\n    threshold: 0.7,\r\n  };\r\n  const isVisibile = useElementOnScreen(options, videoRef);\r\n\r\n  useEffect(() => {\r\n    if (isVisibile) {\r\n      var playPromise = videoRef.current.play();\r\n\r\n      if (playPromise !== undefined) {\r\n        playPromise\r\n          .then((_) => {\r\n            if (!isPlaying) {\r\n              videoRef.current.play();\r\n              setPlaying(true);\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            // Auto-play was prevented\r\n            // Show paused UI.\r\n          });\r\n      }\r\n    } else {\r\n      if (isPlaying) {\r\n        videoRef.current.pause();\r\n        setPlaying(false);\r\n      }\r\n    }\r\n  }, [isVisibile]);\r\n\r\n  const handleShareIcon = () => {\r\n    // alert(\"Subscribed\")\r\n    if (isSubscribe === false) {\r\n      setSubscribed(true);\r\n      setTimeout(() => {\r\n        setSubscribed(false);\r\n      }, 3000);\r\n    } else {\r\n      setSubscribed(false);\r\n    }\r\n  };\r\n\r\n  const playVideo = () => {\r\n    if (isPlaying == false) {\r\n      videoRef.current.play();\r\n      setPlaying(true);\r\n    } else {\r\n      videoRef.current.pause();\r\n      setPlaying(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"video_content-wrapper\">\r\n     \r\n          <video\r\n            controls\r\n            autoPlay=\"autoplay\"\r\n            webkit-playsinline=\"true\"\r\n            playsInline\r\n            ref={videoRef}\r\n            onClick={playVideo}\r\n            loop\r\n            alt=\"Video\"\r\n            className=\"video_content-clip\"\r\n            src={url}\r\n            type=\"video/mp4\"\r\n          />\r\n       \r\n\r\n        <div className=\"video_content-emoji\">\r\n          <img src={urlAvatar} className=\"avatar-info\" alt=\"Avatar\" />\r\n          <span className=\"video_content-icon\">\r\n            <AiFillHeart\r\n              className=\"icon-heart\"\r\n              onClick={handleShareIcon}\r\n              style={isSubscribe ? { color: \"red\" } : {}}\r\n            />\r\n          </span>\r\n          <span>13.9k</span>\r\n          <span className=\"video_content-icon\">\r\n            <FaCommentDots />\r\n          </span>\r\n          <span>512</span>\r\n\r\n          <span className=\"video_content-icon\">\r\n            <FaShare className=\"share-icon\" />\r\n            <div className=\"video_share-wrapper\">\r\n              <ul className=\"video_share-list\">\r\n                <li className=\"video_share-item\">\r\n                  <span className=\"video_share-item-icon\">\r\n                    <ImEmbed2 />\r\n                  </span>\r\n                  <a href=\"#\" className=\"video_share-item-link\">\r\n                    Nhúng\r\n                  </a>\r\n                </li>\r\n                <li className=\"video_share-item\">\r\n                  <span className=\"video_share-item-icon\">\r\n                    <BsFacebook />\r\n                  </span>\r\n                  <a href=\"#\" className=\"video_share-item-link\">\r\n                    Chia sẻ facebook\r\n                  </a>\r\n                </li>\r\n                <li className=\"video_share-item\">\r\n                  <span className=\"video_share-item-icon\">\r\n                    <FaWhatsapp />\r\n                  </span>\r\n                  <a href=\"#\" className=\"video_share-item-link\">\r\n                    Chia sẻ Whatsapp\r\n                  </a>\r\n                </li>\r\n                <li className=\"video_share-item\">\r\n                  <span className=\"video_share-item-icon\">\r\n                    <FiSend />\r\n                  </span>\r\n                  <a href=\"#\" className=\"video_share-item-link\">\r\n                    Gửi cho bạn bè\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </span>\r\n\r\n          <span>103</span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function Video({\r\n  urlVideo,\r\n  urlAvatar,\r\n  userName,\r\n  userId,\r\n  musicName,\r\n  tagId,\r\n}) {\r\n  return (\r\n    <div className=\"video-wrapper\">\r\n      <VideoInfo\r\n        urlAvatar={urlAvatar}\r\n        userName={userName}\r\n        userId={userId}\r\n        musicName={musicName}\r\n        tagId={tagId}\r\n      />\r\n      <VideoContent url={urlVideo} urlAvatar={urlAvatar} />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}